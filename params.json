{
  "name": "Udacity-dand-dataviz",
  "tagline": "Visualizing Prosper Originations Over Time By State",
  "body": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<link rel=\"stylesheet\" href=\"css/d3.slider.css\" />\r\n<link rel=\"stylesheet\" href=\"css/main.css\" />\r\n<script src=\"http://d3js.org/d3.v3.min.js\"></script>\r\n<script src=\"https://d3js.org/d3-queue.v3.min.js\"></script>\r\n<script src=\"http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js\"></script>\r\n<script src=\"js/d3.slider.js\"></script>\r\n<script src=\"js/helper.js\"></script>\r\n</head>\r\n<body>\r\n\t<div class=\"wrapper\">\r\n\t<h1>Prosper Loan Originations By State Between 2008 - Early 2014</h1>\t\r\n\t<div id=\"map\"></div>\r\n\t<h2>Selected Year: <span id=\"slider3text\">2006</span></h2>\t\r\n\t<div id=\"slider\"></div>\r\n\t</div>\r\n<script type=\"text/javascript\">\r\n\t\t\r\nvar margin = 0,\r\n\twidth = 900 - margin;\r\n\theight = 540 - margin;\r\n\t\r\nvar projection = d3.geo.albersUsa()\r\n\t\t\t\t   .translate([width/2, height/2])    \r\n\t\t\t\t   .scale([1000]);          \r\nvar path = d3.geo.path()               \r\n\t\t  \t .projection(projection);  \r\n\t\t\r\nvar svg = d3.select(\"#map\")\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", width + margin)\r\n\t\t\t.attr(\"height\", height + margin);\r\nvar maxOriginated = 100000000;\r\nvar minOriginated = 1;\r\nvar color = d3.scale.linear()\r\n\t\t.domain([minOriginated,maxOriginated])\r\n\t\t.range([\"lightblue\",\"blue\"]);\r\n/*\r\nSetup Tool Tip to show originations for each state on hover. \r\nFormat number to be expressed as a dollar amount.\t\t\t\r\n*/\r\nvar number_format = d3.format(\"$,0\")\r\nvar tip = d3.tip()\r\n\t\t    .attr('class', 'd3-tip')\r\n\t\t    .offset([-10, 0])\r\n\t\t    .html(function(d) {\r\n\t\t\t\treturn \"<strong>\" + d.properties.name + \":</strong> <span style='color:red'> \" + number_format(d.properties.originated) + \"</span>\";\r\n\t\t    })\r\nsvg.call(tip);\r\n//Load Datasets\r\nd3.queue()\r\n\t.defer(d3.csv, \"data/prosperLoanData.csv\")\r\n\t.defer(d3.csv, \"data/states.csv\")\r\n\t.defer(d3.json, \"data/us-states.json\")\r\n\t.await(draw);\r\n//Initial data will show for 2006\r\nvar init_year = 2006;\r\nfunction draw(error, prosper_data, abbrev_data,usa_data) {\r\n\t//See js/helper.js for the filtered_data function\r\n\tvar usa_data = filtered_data(prosper_data, abbrev_data,usa_data,init_year);\r\n\t\r\n\tsvg.selectAll(\"path\")\r\n\t\t.data(usa_data.features)\r\n\t\t.enter()\r\n\t\t.append(\"path\")\r\n\t\t.attr(\"d\", path)\r\n\t\t.style(\"stroke\", \"black\")\r\n\t\t.style(\"stroke-width\", \"0.5\")\r\n\t\t.style(\"fill\", function(d) {\r\n\t\t\tvar value = d.properties.originated;\r\n\t\t\tif (value) {\r\n\t\t\t\treturn color(value);\r\n\t\t\t} else {\r\n\t\t\t\t//if the state does not have a value, we return different color.\r\n\t\t\t\treturn \"rgb(213,222,217)\";\r\n\t\t\t}\r\n\t\t})\r\n\t\t.on('mouseover', tip.show)\r\n        .on('mouseout', tip.hide);\r\n\t\t\r\n\t//LEGEND\t\t\r\n\tvar legend = d3.select(\"body\").append(\"svg\")\r\n\t      \t\t\t.attr(\"class\", \"legend\")\r\n\t     \t\t\t.attr(\"width\", 200)\r\n\t    \t\t\t.attr(\"height\", 200)\r\n\t   \t\t\t\t.selectAll(\"g\")\r\n\t   \t\t\t\t.data([\"blue\",\"lightblue\",\"rgb(213,222,217)\"])\r\n\t   \t\t\t\t.enter()\r\n\t   \t\t\t\t.append(\"g\")\r\n\t     \t\t\t.attr(\"transform\", function(d, i) { return \"translate(0,\" + i * 20 + \")\"; });\r\n\tlegend.append(\"rect\")\r\n\t   \t\t  .attr(\"width\", 18)\r\n\t   \t\t  .attr(\"height\", 18)\r\n\t   \t\t  .style(\"fill\", function(d) {return d;});\r\n\tlegend.append(\"text\")\r\n\t  \t\t  .data([\"$100,000,000\",\"$1\",\"0$ (Due to Lending Restrictions)\"])\r\n\t      \t  .attr(\"x\", 24)\r\n\t      \t  .attr(\"y\", 9)\r\n\t      \t  .attr(\"dy\", \".35em\")\r\n\t      \t  .text(function(d) { return d; });\r\n\t \r\n\t//SLIDER\r\n\t//To move between years\r\n\tvar min = 2006;\r\n\tvar max = 2014;\r\n\tvar ticks = max - min;\r\n\td3.select('#slider').call(\r\n\t\td3.slider()\r\n\t\t\t.axis(true)\r\n\t\t\t.min(min)\r\n\t\t\t.max(max)\r\n\t\t\t.step(1)\r\n\t\t\t.value(init_year)\t\r\n\t\t\t.on(\"slide\", function(evt,value) {\r\n\t\t\t  \td3.select('#slider3text').text(value);\r\n\t\t\t\tvar usa_data_new = filtered_data(prosper_data, abbrev_data,usa_data,value);\r\n\t\t\t\t//see helper.js for the update function\r\n\t\t\t\tupdate(usa_data_new);\t\t\t\t\r\n\t\t\t})\r\n\t);\r\n};\r\n</script>\r\n</body>\r\n</html>",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}